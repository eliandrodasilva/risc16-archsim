# ArchSim

ArchSim is a Java-based architecture simulator that can execute binary files generated by the [arq-sim-assembler](https://github.com/ehmcruz/arq-sim-assembler) created by Professor Eduardo.  
It supports two execution modes:
- **Monocycle** processor simulation
- **Pipeline** processor simulation

## Requirements

Before compiling or running the simulator, ensure you have:

- **Java Development Kit (JDK)** installed (version 8 or later recommended)
- (Optional) **JetBrains IntelliJ IDEA** or another Java IDE, if you wish to run without manual compilation
- (Optional) Binary files (`.bin`) generated by [arq-sim-assembler](https://github.com/ehmcruz/arq-sim-assembler), following the ASM syntax patterns from the examples in that repository
  (this repository already have some test .bin files for example) and place your `.bin` files inside a folder named **`bin/`** at the root of the project.

---

## Option 1 — Compiling and Running the Main Program

This method requires the **JDK**.

### 1. Compile the source code
From the root folder of the project:
```bash
javac -d out src/app/*.java src/core/*.java
```
This will compile the classes into the out folder.

### 2. Run the program
```
java -cp out app.Archsim <file.bin> [--verbose] [--pipeline]
```
#### Arguments:
- <file.bin> — The binary file located in the bin/ folder (e.g., ps.bin)
- --verbose (optional) — Enables detailed logging
- --pipeline (optional) — Runs using the pipeline processor; if omitted, runs monocycle mode

#### Example:
```
java -cp out app.Archsim ps.bin --verbose --pipeline
```
This will execute ps.bin in pipeline mode with verbose logging enabled.

## Option 2 — Running Without Compilation (Using Test Classes in an IDE)
If you do not have a Java compiler set up, you can run ArchSim directly from an IDE such as IntelliJ IDEA using the provided test classes.

#### Monocycle Test
File: ```src/app/MonocycleTest.java```
```
MonocycleProcessor monocycleProcessor = new MonocycleProcessor(verbose);
monocycleProcessor.run("bin/ps.bin");
```
- Set ```verbose = true``` to enable logs.
- Change ```"bin/ps.bin"``` to your desired ```.bin``` file.

#### Pipeline Test
File: ```src/app/PipelineTest.java```
```
PipelineProcessor pipelineProcessor = new PipelineProcessor(verbose);
pipelineProcessor.run("bin/perfect-squares-large.bin");
```
- Set ```verbose = true``` to enable logs.
- Change ```"bin/perfect-squares-large.bin"``` to your desired ```.bin``` file.

You can run these directly from the IDE without manual compilation, as long as the .bin files are correctly placed in the bin/ folder.